<!DOCTYPE html>
<html itemscope itemtype="http://schema.org/Article" lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="twitter:card" content="summary">

<!-- Schema.org markup for Google+ -->
<!-- Twitter Card data -->
<!-- Open Graph data -->

    <meta name="google-site-verification" content="GK5cKdKe-CQEFsGx1pPxHFhflO88ddWG8NdWk_KDabA" />
    
    <title>Upgrades - </title>
    <meta property="og:title" content="Upgrades - ">
    <meta name="twitter:title" content="Upgrades - ">
    <meta itemprop="name" content="Upgrades - ">

    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="author" content="">
    <meta property="og:site_name" content="Upgrades" >
    <meta property="og:url" content="/tutorials/manage/upgrades.html" >
    
  
    <meta name="description" content=" ...">
    <meta property="og:description" content=" ..." >
    <meta name="twitter:description" content=" ...">  
    <meta itemprop="description" content=" ...">
  
    
  
    <meta property="og:image" content="/default_preview.png">
    <meta name="twitter:image" content="/default_preview.png">
    <meta itemprop="image" content="/default_preview.png">
  
  
  <meta name="twitter:site" content="@lynnnoton">
  <meta name="twitter:creator" content="@lynnnoton">

  
    <!-- 
    
<link href='http://fonts.googleapis.com/css?family=Roboto' rel='stylesheet' type='text/css'>
    
    <link href='http://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>

    
    -->
<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.4/jquery.min.js"></script>
<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.6/js/bootstrap.min.js"></script>
<script src="https://use.fontawesome.com/ee2438614b.js"></script>
       
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="//maxcdn.bootstrapcdn.com/bootstrap/3.3.6/css/bootstrap.min.css">

<script src="https://cdn.rawgit.com/google/code-prettify/master/loader/run_prettify.js?autoload=true&amp;skin=sunburst&amp;lang=css" defer="defer"></script>


    <script>
        (function() {
          var cx = '006109472892303620439:hmwpm8s4lvi';
          var gcse = document.createElement('script');
          gcse.type = 'text/javascript';
          gcse.async = true;
          gcse.src = 'https://cse.google.com/cse.js?cx=' + cx;
          var s = document.getElementsByTagName('script')[0];
          s.parentNode.insertBefore(gcse, s);
        })();
    </script>
      
    <script src="/scripts/default.js"></script>

    <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha384-BVYiiSIFeK1dGmJRAkycuHAHRg32OmUcww7on3RYdg4Va+PmSTsz/K68vbdEjh4u" crossorigin="anonymous">

    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch.min.css">
    <script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4"></script>
    <link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.10.4/dist/instantsearch-theme-algolia.min.css">


    <link rel="stylesheet" type="text/css" href="/css/style.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/tables.css"></link>
    <link rel="stylesheet" type="text/css" href="/css/prettify.css"></link>
    
    
      <link rel="shortcut icon" href="/images/favicon.ico">
      <link rel="apple-touch-icon" href="/images/touchicon_57.png">
      <link rel="apple-touch-icon" sizes="72x72" href="/images/touchicon_62.png">
      <link rel="apple-touch-icon" sizes="114x114" href="/images/touchicon_114.png">
      
      
  </head>

  <body>

      <a name="top"></a>     
         
         
                               
                      <div class="titlebox">
                                                    
                         <div class="blogtitle">
                          
                              <a href="">AresMUSH</a> 
                              
                          </div>
                          
                          <div class="tagline">
                                A New Breed of MUSH Server            
                            </div>
                            
                            </div>
                             
                      
                            <nav class="navbar navbar-dark">
 
    <ul class="nav navbar-nav">
      <li class="active">
        <a href="/">Home <span class="sr-only">(current)</span></a>
      </li>
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Features <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/features/">Why Ares?</a></li>
          <li><a href="/features/ares-for-players.html">Ares for Players</a></li>
          <li><a href="/features/ares-for-admins.html">Ares for Admins</a></li>
          <li><a href="/features/ares-for-coders.html">Ares for Coders</a></li>
          <li><hr/></li>
          <li><a href="/web-portal">The Web Portal</a></li>
          <li><a href="/features/skills.html">Skills Systems</a></li>
          <li><a href="/handles">Player Handles</a></li>
          <li><a href="/features/server-roundup.html">Server Comparison</a></li>
        </ul>
      </li>  
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Tutorials <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/mush-101">MUSH 101</a></li>
          <li><a href="/tutorials/play">Playing Ares</a></li>
          <li><a href="/tutorials/install">Installing Ares</a></li>
          <li><a href="/tutorials/config">Configuring Ares</a></li>
          <li><a href="/tutorials/manage">Managing Ares</a></li>
          <li><a href="/tutorials/code">Coding for Ares</a></li>
        </ul>
      </li>    
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">FS3 <span class="caret"></span></a>

        <ul class="dropdown-menu">
          <li><a href="/fs3/">FS3 Home</a></li>
          <li><a href="/fs3/fs3-3/">Player's Guide</a></li>
          <li><a href="/fs3/fs3-3/roll-quickref.html">Skills Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-quickref.html">Combat Quick Reference</a></li>
          <li><a href="/fs3/fs3-3/combat-walkthrough.html">Interactive Combat Walkthrough</a></li>
          <li><a href="/fs3/old-editions.html">Prior Edition Guides</a></li>
        </ul>
      </li>
      
      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Code <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/code/">Source Code</a></li>
          <li><a href="/tutorials/code">Learn to Code</a></li>
          <li><a href="https://github.com/AresMUSH/aresmush/releases">Release Notes <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>
      
      <li class="dropdown">
        <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Community <span class="caret"></span></a>
        
        <ul class="dropdown-menu">
          <li><a href="http://arescentral.aresmush.com">AresCentral Directory <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://forum.aresmush.com">Discussion Forum <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
          <li><a href="http://logcleaner.aresmush.com/">RP Log Cleaner <i class="fa fa-external-link" aria-hidden="true"></i></a></li>
        </ul>
      </li>

      <li class="dropdown">
          <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">About <span class="caret"></span></a>
        <ul class="dropdown-menu">
          <li><a href="/feedback.html">Contact Us</a>
          <li><a href="/license.html">License</a>
          <li><a href="/privacy.html">Privacy Policy</a>
        </ul>
      </li>

    </ul>
</nav>

                      
                        
         
         <div class="page-block">
         
                           <div class="row">
                         
                         
    <div class="col col-sm-9">   

<h1>Upgrades</h1>

    <div class="tags-box">
                 <ul class="tags-box">
                 
                 <li>[manage]</li>
                 
                 <li>[code]</li>
                 
                 <li>[upgrade]</li>
                 
                 </ul>
    </div>
                               
             <div class="page">
                 <p>At some point there will be a new version of Ares code available and you’ll want to upgrade the code on the game server.</p>

<div class="alert alert-info">
<p><i class="fa fa-exclamation-triangle"></i> <b>Note</b></p>
<p>These instructions assume that you've followed the standard installation process and have your game server pointed at GitHub (either to the main Ares repository or to [your own fork](/tutorials/code/git.html)).  If you've done something different with your server, you may need to adapt the instructions to your environment.</p>
</div>

<div id="inline_toc">
  <p><strong>Table of Contents</strong></p>

<ul id="markdown-toc">
  <li><a href="#important-note-about-downgrades" id="markdown-toc-important-note-about-downgrades">Important Note About Downgrades</a></li>
  <li><a href="#updating-your-own-fork" id="markdown-toc-updating-your-own-fork">Updating Your Own Fork</a></li>
  <li><a href="#upgrade-while-running" id="markdown-toc-upgrade-while-running">Upgrade While Running</a></li>
  <li><a href="#upgrade-with-a-restart" id="markdown-toc-upgrade-with-a-restart">Upgrade With a Restart</a></li>
  <li><a href="#resolving-conflicts" id="markdown-toc-resolving-conflicts">Resolving Conflicts</a></li>
</ul>

</div>

<h2 id="important-note-about-downgrades">Important Note About Downgrades</h2>

<div class="alert alert-info">
<p><i class="fa fa-exclamation-triangle"></i> <b>Note</b></p>
<p>Ares has a lot of support for **upgrades** but not for *downgrades*.  If you ever find yourself needing to revert back to a previous version, you may need to make some custom code tweaks to prevent data loss (since database fields may be different between versions).  Unless you're super-comfortable with the code, it's probably best to [ask for help](/feedback.html) before attempting this. </p>
</div>

<h2 id="updating-your-own-fork">Updating Your Own Fork</h2>

<p>If you are making custom code changes and have your own GitHub fork, you’ll need to update your fork to get the latest code from the main Ares repository. See <a href="/tutorials/code/git.html#upgrade">upgrading forks</a>.</p>

<h2 id="upgrade-while-running">Upgrade While Running</h2>

<p>Many version upgrades can be done while the game is still running.</p>

<div class="alert alert-success">
<p><i class="fa fa-info-circle"></i> <b>Tip</b></p>
<p>The version's release notes will advise you if a restart is required.  If so, follow the instructions in **Upgrade With a Restart** instead.</p>
</div>

<ol>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="n">upgrade</span></code> to commit any local changes and get the latest game code from GitHub.  If you see any CONFLICT notices from the upgrade, you’ll need to edit the code on the server shell as explained in Resolving Conflicts below.</li>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="nb">load</span> <span class="n">all</span></code>  to reload the code and configuration.</li>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="n">migrate</span></code> to run any database updates.</li>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="n">website</span><span class="o">/</span><span class="n">deploy</span></code> to re-deploy the website.</li>
</ol>

<h2 id="upgrade-with-a-restart">Upgrade With a Restart</h2>

<p>Some version upgrades require a game restart, particularly if game engine changes or there’s a major database update.  Even if the version doesn’t <em>require</em> a restart, it’s still fine to do one.  You’ll shut the game down, update the code, and then restart it.  Total downtime should be a few minutes at most.</p>

<ol>
  <li><a href="/tutorials/manage/shutdown.html">Shut down the game</a> using the <code class="language-ruby highlighter-rouge"><span class="n">shutdown</span></code> command in-game or the web portal admin screen.</li>
  <li>Connect to the <a href="/tutorials/install/server-shell.html">server shell</a> and change to the <code class="language-ruby highlighter-rouge"><span class="n">aresmush</span></code> folder.</li>
  <li>Use git commands or the <code class="language-ruby highlighter-rouge"><span class="n">bin</span><span class="o">/</span><span class="n">upgrade</span></code> script to commit any local changes and get the latest game code from GitHub.  If you see any CONFLICT notices from the upgrade, see Resolving Conflicts below.</li>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="n">bin</span><span class="o">/</span><span class="n">migrate</span></code> to perform any necessary database migrations.</li>
  <li>Type <code class="language-ruby highlighter-rouge"><span class="n">bin</span><span class="o">/</span><span class="n">startares</span></code> to restart the game.</li>
</ol>

<h2 id="resolving-conflicts">Resolving Conflicts</h2>

<p>Sometimes there may be conflicts between code that changed in the new version and code/configuration changes you’ve made yourself.  When that happens, you’ll see a message during the upgrade like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">CONFLICT</span><span class="o">!</span> <span class="no">Merge</span> <span class="n">conflict</span> <span class="k">in</span> <span class="n">plugins</span><span class="o">/</span><span class="n">channels</span><span class="o">/</span><span class="n">channels</span><span class="p">.</span><span class="nf">rb</span>
</code></pre></div></div>

<p>You’ll need to edit the files in question to resolve the conflict.  You’ll see lines like this where there are conflicts between your code and the main Ares code:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Some</span> <span class="n">code</span><span class="p">.</span>
<span class="nf">&lt;</span><span class="o">&lt;&lt;&lt;&lt;&lt;&lt;</span> <span class="no">HEAD</span>
<span class="n">your</span> <span class="n">oriignal</span> <span class="n">version</span> <span class="n">will</span> <span class="n">be</span> <span class="k">in</span> <span class="n">this</span> <span class="n">section</span>
<span class="o">=======</span>
<span class="n">the</span> <span class="n">upgraded</span> <span class="n">main</span> <span class="no">Ares</span> <span class="n">code</span> <span class="n">will</span> <span class="n">be</span> <span class="k">in</span> <span class="n">this</span> <span class="n">section</span>
<span class="o">&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span> <span class="n">master</span>
</code></pre></div></div>

<p>Edit the file manually to choose which version you want, and get rid of all the <code class="language-ruby highlighter-rouge"><span class="o">&lt;&lt;&lt;</span> <span class="o">&gt;&gt;&gt;</span></code> junk.  The final file should look clean, like:</p>

<div class="language-ruby highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="no">Some</span> <span class="n">code</span><span class="p">.</span>
<span class="nf">your</span> <span class="n">modified</span> <span class="n">code</span>
</code></pre></div></div>

<p>Sometimes, rather than dealing with the conflict it’s easier to just copy/paste the code for that file from <a href="http://github.com/aresmush/aresmush">GitHub</a> and start fresh.  Once you have the new main Ares version, you can redo your custom changes.</p>

<p>If you run into trouble resolving conflicts, don’t be shy about <a href="/feedback.html">asking for help</a>.</p>

             </div>             
                           </div>
              
                           <div class="col col-sm-3">
                                                 <div class="sidebar">   
                 
<div id="search-box">
  <!-- SearchBox widget will appear here -->
</div>
                  
<div class="sidebar-title">See AresMUSH In Action</div>

<p>Visit the Ares <a href="http://mush.aresmush.com">Demo Game</a>.</p>

<p>Find other Ares games at <a href="http://arescentral.aresmush.com">AresCentral</a>.</p>


<div class="sidebar-title">Follow Us on Facebook</div>

<div id="fb-root"></div>
<script>(function(d, s, id) {
  var js, fjs = d.getElementsByTagName(s)[0];
  if (d.getElementById(id)) return;
  js = d.createElement(s); js.id = id;
  js.src = "//connect.facebook.net/en_US/sdk.js#xfbml=1&version=v2.5&appId=1423276681271936";
  fjs.parentNode.insertBefore(js, fjs);
}(document, 'script', 'facebook-jssdk'));</script>

<div class="fb-page" data-href="https://www.facebook.com/aresmush/" data-small-header="false" data-adapt-container-width="true" data-hide-cover="false" data-show-facepile="false"><div class="fb-xfbml-parse-ignore"><blockquote cite="https://www.facebook.com/aresmush/"><a href="https://www.facebook.com/aresmush/">Ares Mush</a></blockquote></div></div>

<div class="sidebar-title">Discuss Ares</div>

Have a question?  Want to talk about AresMUSH (or MU*s in general)?  Visit our <a href="http://forum.aresmush.com">Discussion Forum</a>.
                  
                  

                  <div class="sidebar-title">Stay Up to Date</div>
                          
                          Get important updates about Ares on <a href="https://www.facebook.com/aresmush/">Facebook</a> or the <a href="http://forum.aresmush.com">Discussion Forum</a>.

              <div id="searchModal" class="modal fade" role="dialog">
  <div class="modal-dialog modal-lg">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <h4 class="modal-title">Search Results</h4>
        <button type="button" class="close" data-dismiss="modal">&times;</button>
      </div>
      <div class="modal-body">
       

       <div id="search-hits">
         <!-- Hits widget will appear here -->
       </div>


       <div id="search-pagination">
         <!-- Pagination widget will appear here -->
       </div>
       
       
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>


<script src="/scripts/search.js"></script>
<script>
  initializeSearch( 'NI38C577BA',
    '29793fd9084a3446072c14e471e32589',
    'aresmush.com',
    ' ' );
</script>

                  

                  
                
                  
                           </div>
</div>
                          
              </div>
              
          </div>
          

          <div class="footer">
             <p> &copy;  2013 with help from the <a href="http://ruhoh.com" target="_blank" title="The Definitive Technical Blogging Framework">ruhoh</a> blog engine.
              </p>
          </div>
          
      
     
  </body>
</html>
